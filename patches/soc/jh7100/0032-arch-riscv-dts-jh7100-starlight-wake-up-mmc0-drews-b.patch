From 4133f0d6452920fb7f12ec6a51ee7ddb7ee86118 Mon Sep 17 00:00:00 2001
From: Stephen L Arnold <nerdboy@gentoo.org>
Date: Sun, 16 May 2021 17:14:18 -0700
Subject: [PATCH] arch: riscv: dts: jh7100-starlight: wake up mmc0 (drews bb.o
 issue)

Signed-off-by: Stephen L Arnold <nerdboy@gentoo.org>
---
 arch/riscv/boot/dts/starfive/jh7100-starlight.dts | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/arch/riscv/boot/dts/starfive/jh7100-starlight.dts b/arch/riscv/boot/dts/starfive/jh7100-starlight.dts
index 39a9e160df9e..902d45e26e96 100644
--- a/arch/riscv/boot/dts/starfive/jh7100-starlight.dts
+++ b/arch/riscv/boot/dts/starfive/jh7100-starlight.dts
@@ -134,6 +134,8 @@ spi_dev0: spi@0 {
 &sdio0 {
 	bus-width = <4>;
 	cap-sd-highspeed;
+	broken-cd;
+	no-sdio;
 	status = "okay";
 };
 
@@ -143,7 +145,9 @@ &sdio1 {
 	bus-width = <4>;
 	cap-sd-highspeed;
 	cap-sdio-irq;
-	cap-power-off-card;
+	cap-mmc-hw-reset;
+	enable-sdio-wakeup;
+	keep-power-in-suspend;
 	mmc-pwrseq = <&wifi_pwrseq>;
 	non-removable;
 	status = "okay";
-- 
2.30.0

