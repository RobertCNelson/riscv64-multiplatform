From 1c763d2e89fa64a19deca08399eba453fe0e8588 Mon Sep 17 00:00:00 2001
From: Stephen L Arnold <nerdboy@gentoo.org>
Date: Sun, 16 May 2021 21:44:59 -0700
Subject: [PATCH] arch: riscv: dts: jh7100-starlight: use thermal bindings,
 cleanup names

Signed-off-by: Stephen L Arnold <nerdboy@gentoo.org>
---
 arch/riscv/boot/dts/starfive/jh7100.dtsi | 5 +++--
 drivers/hwmon/sfctmp.c                   | 4 ++--
 2 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/arch/riscv/boot/dts/starfive/jh7100.dtsi b/arch/riscv/boot/dts/starfive/jh7100.dtsi
index 3935ef694635..d562518f769d 100644
--- a/arch/riscv/boot/dts/starfive/jh7100.dtsi
+++ b/arch/riscv/boot/dts/starfive/jh7100.dtsi
@@ -1,4 +1,5 @@
 /dts-v1/;
+#include <dt-bindings/thermal/thermal.h>
 #include <dt-bindings/starfive_fb.h>
 #include <dt-bindings/gpio/gpio.h>
 
@@ -711,12 +712,12 @@ vin_sysctl: vin_sysctl@19800000 {
 			csi-dt = <0x2b>;
 		};
 
-		sfc_tmp: tmpsensor@124a0000 {
+		sfc_tmp: thermal-sensor@124a0000 {
 			compatible = "sfc,tempsensor";
 			reg = <0x0 0x124a0000 0x0 0x1000>;
 			interrupt-parent = <&plic>;
 			interrupts = <122>;
-			status = "okay";
+			#thermal-sensor-cells = <0>;
 		};
 
 		otp: otp@11810000 {
diff --git a/drivers/hwmon/sfctmp.c b/drivers/hwmon/sfctmp.c
index 901f92f8dd2d..30525c770aed 100644
--- a/drivers/hwmon/sfctmp.c
+++ b/drivers/hwmon/sfctmp.c
@@ -160,7 +160,7 @@ static int sfc_temp_probe(struct platform_device *pdev)
 		return PTR_ERR(sfc_temp->regs);
 	}
 
-	sfc_temp->name = "sfc_tempsnsor";
+	sfc_temp->name = "sfc_temp_sensor";
 
 	ret = devm_request_irq(temp_dev, sfc_temp->irq, sfc_temp_isr,
 			       IRQF_SHARED, sfc_temp->name, sfc_temp);
@@ -208,4 +208,4 @@ module_platform_driver(sfc_temp_sensor_driver);
 
 MODULE_AUTHOR("samin.guo");
 MODULE_DESCRIPTION("SFC temperature sensor driver");
-MODULE_LICENSE("GPL");
\ No newline at end of file
+MODULE_LICENSE("GPL");
-- 
2.30.0

